(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9917a9d0"],{"08ea":function(e,t,a){"use strict";a.r(t);var s=a("d0ff"),r=a("c964"),n=a("f3f3"),i=(a("96cf"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("d81d"),a("a15b"),a("159b"),a("e9c4"),a("99af"),a("232f")),o=a("2f62"),l=a("61f7"),c={name:"table-expand",filters:{formatDate:function(e){if(0!==e)return e=new Date(1e3*e),Object(l.a)(e,"yyyy-MM-dd hh:mm")}},props:{row:Object}},u=(a("e258"),a("2877")),d=Object(u.a)(c,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",[t("Row",{staticClass:"expand-row"},[t("Col",{attrs:{span:"6"}},[t("span",{staticClass:"expand-key"},[e._v("首次访问：")]),t("span",{staticClass:"expand-value"},[e._v(" "+e._s(e._f("formatDate")(e.row.add_time)))])]),t("Col",{attrs:{span:"6"}},[t("span",{staticClass:"expand-key"},[e._v("近次访问：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e._f("formatDate")(e.row.last_time)))])]),t("Col",{attrs:{span:"6"}},[t("span",{staticClass:"expand-key"},[e._v("身份证号：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.card_id))])]),t("Col",{attrs:{span:"6"}},[t("span",{staticClass:"expand-key"},[e._v("真实姓名：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.real_name))])])],1),t("Row",{staticClass:"expand-row"},[t("Col",{attrs:{span:"6"}},[t("span",{staticClass:"expand-key"},[e._v("标签：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.labels))])]),t("Col",{attrs:{span:"6"}},[t("span",{staticClass:"expand-key"},[e._v("生日：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.birthday))])]),t("Col",{attrs:{span:"6"}},[t("span",{staticClass:"expand-key"},[e._v("推荐人：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.spread_uid_nickname))])]),t("Col",{attrs:{span:"6"}},[t("span",{staticClass:"expand-key"},[e._v("地址：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.addres))])])],1),t("Row",{staticClass:"expand-row"},[t("Col",{attrs:{span:"6"}},[t("span",{staticClass:"expand-key"},[e._v("备注：")]),t("span",{staticClass:"expand-value"},[e._v(e._s(e.row.mark))])])],1)],1)}),[],!1,null,"73d11289",null).exports,m=(c=a("fc11"),a("b64b"),a("4de4"),a("a434"),a("c24f")),p=(c={name:"userEdit",components:{userLabel:i.a},props:{userData:{type:Object,default:function(){}}},watch:{},data:function(){return{modals:!1,labelShow:!1,orderStatus:0,total_num:0,splitSwitch:!0,formItem:{uid:0,real_name:"",phone:"",birthday:"",card_id:"",addres:"",mark:"",pwd:"",true_pwd:"",level:"",group_id:"",label_id:[],spread_open:0,is_promoter:0,status:1},express:[],expressTemp:[],deliveryList:[],temp:{},export_open:!0,manyFormValidate:[],groupInfo:[],labelInfo:[],levelInfo:[],infoData:{groupInfo:[],labelInfo:[],levelInfo:[]},dataLabel:[]}},mounted:function(){var e=this,t=(this.$set(this.infoData,"groupInfo",this.userData.groupInfo),this.$set(this.infoData,"levelInfo",this.userData.levelInfo),this.$set(this.infoData,"labelInfo",this.userData.labelInfo),Object.keys(this.formItem));this.userData.userInfo.uid&&(t.map((function(t){e.formItem[t]=e.userData.userInfo[t]})),this.formItem.birthday||(this.formItem.birthday=""),this.formItem.label_id.length&&(this.dataLabel=this.formItem.label_id))},methods:(p={addLabel:function(){this.$modalForm(Object(m.M)(0)).then((function(){}))},closeLabel:function(e){var t=this.dataLabel.indexOf(this.dataLabel.filter((function(t){return t.id==e.id}))[0]);this.dataLabel.splice(t,1)},changeModal:function(e){e||(this.cancel(),this.reset())},openLabel:function(e){this.labelShow=!0,this.$refs.userLabel.userLabel(JSON.parse(JSON.stringify(this.infoData.labelInfo)))},cancel:function(){},activeData:function(e){this.labelShow=!1,this.dataLabel=e},labelClose:function(){this.labelShow=!1}},Object(c.a)(p,"closeLabel",(function(e){var t=this.dataLabel.indexOf(this.dataLabel.filter((function(t){return t.id==e.id}))[0]);this.dataLabel.splice(t,1)})),Object(c.a)(p,"reset",(function(){this.formItem={uid:0,real_name:"",phone:"",birthday:"",card_id:"",addres:"",mark:"",pwd:"",true_pwd:"",level:"",group_id:"",label_id:[],spread_open:0,is_promoter:0,status:1}})),p)},a("6ebe"),Object(u.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"formItem",attrs:{model:e.formItem,"label-width":100},nativeOn:{submit:function(e){e.preventDefault()}}},[e.formItem.uid?a("FormItem",{attrs:{label:"编号："}},[a("Input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{disabled:"",placeholder:"请输入编号"},model:{value:e.formItem.uid,callback:function(t){e.$set(e.formItem,"uid",t)},expression:"formItem.uid"}})],1):e._e(),a("FormItem",{attrs:{label:"真实姓名："}},[a("Input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{placeholder:"请输入真实姓名"},model:{value:e.formItem.real_name,callback:function(t){e.$set(e.formItem,"real_name","string"==typeof t?t.trim():t)},expression:"formItem.real_name"}})],1),a("FormItem",{attrs:{label:"手机号码："}},[a("Input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{placeholder:"请输入手机号码"},model:{value:e.formItem.phone,callback:function(t){e.$set(e.formItem,"phone",t)},expression:"formItem.phone"}})],1),a("FormItem",{attrs:{label:"生日："}},[a("DatePicker",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{type:"date",value:e.formItem.birthday,placeholder:"请选择生日",format:"yyyy-MM-dd"},on:{"on-change":function(t){e.formItem.birthday=t}}})],1),a("FormItem",{attrs:{label:"身份证号："}},[a("Input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{placeholder:"请输入身份证号"},model:{value:e.formItem.card_id,callback:function(t){e.$set(e.formItem,"card_id","string"==typeof t?t.trim():t)},expression:"formItem.card_id"}})],1),a("FormItem",{attrs:{label:"用户地址："}},[a("Input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{placeholder:"请输入用户地址"},model:{value:e.formItem.addres,callback:function(t){e.$set(e.formItem,"addres",t)},expression:"formItem.addres"}})],1),a("FormItem",{attrs:{label:"用户备注："}},[a("Input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{placeholder:"请输入用户备注"},model:{value:e.formItem.mark,callback:function(t){e.$set(e.formItem,"mark",t)},expression:"formItem.mark"}})],1),a("FormItem",{attrs:{label:"登录密码："}},[a("Input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{type:"password",placeholder:"请输入登录密码"},model:{value:e.formItem.pwd,callback:function(t){e.$set(e.formItem,"pwd",t)},expression:"formItem.pwd"}})],1),a("FormItem",{attrs:{label:"确认密码："}},[a("Input",{staticClass:"form-sty",staticStyle:{width:"80%"},attrs:{type:"password",placeholder:"请输入确认密码"},model:{value:e.formItem.true_pwd,callback:function(t){e.$set(e.formItem,"true_pwd",t)},expression:"formItem.true_pwd"}})],1),a("FormItem",{attrs:{label:"用户等级："}},[a("Select",{staticClass:"form-sty",attrs:{clearable:""},model:{value:e.formItem.level,callback:function(t){e.$set(e.formItem,"level",t)},expression:"formItem.level"}},e._l(e.infoData.levelInfo,(function(t,s){return a("Option",{key:s,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),a("FormItem",{attrs:{label:"用户分组："}},[a("Select",{staticClass:"form-sty",attrs:{clearable:""},model:{value:e.formItem.group_id,callback:function(t){e.$set(e.formItem,"group_id",t)},expression:"formItem.group_id"}},e._l(e.infoData.groupInfo,(function(t,s){return a("Option",{key:s,attrs:{value:t.id}},[e._v(e._s(t.group_name))])})),1)],1),a("FormItem",{attrs:{label:"用户标签："}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"labelInput acea-row row-between-wrapper",on:{click:e.openLabel}},[a("div",{staticStyle:{width:"90%"}},[e.dataLabel.length?a("div",e._l(e.dataLabel,(function(t,s){return a("Tag",{key:s,attrs:{closable:""},on:{"on-close":function(a){return e.closeLabel(t)}}},[e._v(e._s(t.label_name))])})),1):a("span",{staticClass:"span"},[e._v("选择用户关联标签")])]),a("div",{staticClass:"ivu-icon ivu-icon-ios-arrow-down"})]),a("span",{staticClass:"addfont",on:{click:e.addLabel}},[e._v("新增标签")])])]),a("FormItem",{attrs:{label:"推广资格："}},[a("RadioGroup",{staticClass:"form-sty",model:{value:e.formItem.spread_open,callback:function(t){e.$set(e.formItem,"spread_open",t)},expression:"formItem.spread_open"}},[a("Radio",{attrs:{label:1}},[e._v("启用")]),a("Radio",{attrs:{label:0}},[e._v("禁用")])],1),a("div",{staticClass:"tip"},[e._v("禁用用户的推广资格后，在任何分销模式下该用户都无分销权限")])],1),a("FormItem",{attrs:{label:"推广权限："}},[a("RadioGroup",{staticClass:"form-sty",model:{value:e.formItem.is_promoter,callback:function(t){e.$set(e.formItem,"is_promoter",t)},expression:"formItem.is_promoter"}},[a("Radio",{attrs:{label:1}},[e._v("开启")]),a("Radio",{attrs:{label:0}},[e._v("锁定")]),a("div",{staticClass:"tip"},[e._v("指定分销模式下，开启或关闭用户的推广权限")])],1)],1),a("FormItem",{attrs:{label:"用户状态："}},[a("RadioGroup",{staticClass:"form-sty",model:{value:e.formItem.status,callback:function(t){e.$set(e.formItem,"status",t)},expression:"formItem.status"}},[a("Radio",{attrs:{label:1}},[e._v("开启")]),a("Radio",{attrs:{label:0}},[e._v("锁定")])],1)],1)],1),a("Modal",{attrs:{scrollable:"",title:"请选择用户标签",closable:!1,width:"500","footer-hide":!0},model:{value:e.labelShow,callback:function(t){e.labelShow=t},expression:"labelShow"}},[e.labelShow?a("userLabel",{attrs:{only_get:!0,uid:e.formItem.uid},on:{close:e.labelClose,activeData:e.activeData}}):e._e()],1)],1)}),[],!1,null,"51a6f4ce",null).exports),h=a("bbbc"),f=a("3f2a"),b=(c=a("31b4"),a("a8e0")),v=a("a716"),g=a("c42b"),_=a("2e8e"),y=a("8c03");c={name:"user_list",components:{expandRow:d,editFrom:c.a,sendFrom:b.a,userDetails:v.a,newsCategory:g.a,customerInfo:y.default,userLabel:i.a,userEdit:p},data:function(){return{dataLabel:[],selectDataLabel:[],userData:{},modals:!1,selectLabelShow:!1,labelShow:!1,customerShow:!1,promoterShow:!1,labelActive:{uid:0},formInline:{uid:0,spread_uid:0,image:""},options:{shortcuts:[{text:"今天",value:function(){var e=new Date,t=new Date;return t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),[t,e]}},{text:"昨天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),[t,e]}},{text:"最近7天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-6))),[t,e]}},{text:"最近30天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-29))),[t,e]}},{text:"本月",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),1))),[t,e]}},{text:"本年",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),0,1))),[t,e]}}]},collapse:!1,headeNum:[{type:"",name:"全部"},{type:"wechat",name:"微信公众号"},{type:"routine",name:"微信小程序"},{type:"h5",name:"H5"},{type:"pc",name:"PC"},{type:"app",name:"APP"}],address:[],addresData:_.a,isShowSend:!0,modal13:!1,maxCols:4,scrollerHeight:"600",contentTop:"130",contentWidth:"98%",grid:{xl:8,lg:8,md:12,sm:24,xs:24},grid2:{xl:18,lg:16,md:12,sm:24,xs:24},loading:!1,total:0,userFrom:{label_id:"",user_type:"",status:"",sex:"",is_promoter:"",country:"",isMember:"",pay_count:"",user_time_type:"",user_time:"",nickname:"",province:"",city:"",page:1,limit:15,level:"",group_id:"",field_key:""},field_key:"",level:"",group_id:"",label_id:"",user_time_type:"",pay_count:"",columns:[{type:"expand",width:40,render:function(e,t){return e(d,{props:{row:t.row}})}},{type:"selection",width:60,align:"center"},{title:"ID",key:"uid",width:80},{title:"头像",slot:"avatars",minWidth:60},{title:"姓名",slot:"nickname",minWidth:150},{title:"付费会员",slot:"isMember",minWidth:90},{title:"用户等级",key:"level",minWidth:90},{title:"分组",key:"group_id",minWidth:100},{title:"手机号",key:"phone",minWidth:100},{title:"用户类型",key:"user_type",minWidth:100},{title:"余额",key:"now_money",sortable:"custom",minWidth:100},{title:"操作",slot:"action",fixed:"right",minWidth:120}],userLists:[],FromData:null,selectionList:[],user_ids:"",selectedData:[],timeVal:[],groupList:[],levelList:[],labelFrom:{page:1,limit:""},labelLists:[],selectedIds:new Set,ids:[]}},computed:Object(n.a)(Object(n.a)({},Object(o.e)("media",["isMobile"])),{},{labelWidth:function(){return this.isMobile?void 0:100},labelPosition:function(){return this.isMobile?"top":"right"}}),created:function(){this.getList()},mounted:function(){this.userGroup(),this.levelLists()},methods:{setUser:function(){var e=this,t=this.$refs.userEdit.formItem,a=[];this.$refs.userEdit.dataLabel.map((function(e){a.push(e.id)})),t.label_id=a,t.uid?Object(m.h)(t).then((function(t){e.modals=!1,e.$Message.success(t.msg),e.getList()})).catch((function(t){e.$Message.error(t.msg)})):Object(m.G)(t).then((function(t){e.modals=!1,e.$Message.success(t.msg),e.getList()})).catch((function(t){e.$Message.error(t.msg)}))},onceGetList:function(){this.labelActive.uid=0,this.getList()},labelClose:function(){this.labelActive.uid=0,this.labelShow=!1,this.selectLabelShow=!1},putSend:function(e){var t=this;this.$refs[e].validate((function(a){if(a){if(!t.formInline.spread_uid)return t.$Message.error("请上传用户");Object(h.c)(t.formInline).then((function(a){t.promoterShow=!1,t.$Message.success(a.msg),t.getList(),t.$refs[e].resetFields()})).catch((function(e){t.$Message.error(e.msg)}))}}))},save:function(){this.modals=!0},synchro:function(){var e=this;Object(m.X)().then((function(t){e.$Message.success(t.msg)})).catch((function(t){e.$Message.error(t.msg)}))},groupLists:function(){var e=this;this.loading=!0,Object(m.O)(this.labelFrom).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=a.data,e.labelLists=s.list;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},onClickTab:function(e){this.userFrom.page=1,this.userFrom.user_type=e,this.getList()},userGroup:function(){var e=this;Object(m.L)({page:1,limit:""}).then((function(t){e.groupList=t.data.list}))},levelLists:function(){var e=this;Object(m.p)({page:1,limit:"",title:"",is_show:1}).then((function(t){e.levelList=t.data.list}))},setGroup:function(){var e,t=this;0===this.ids.length?this.$Message.warning("请选择要设置分组的用户"):(e={uids:this.ids},this.$modalForm(Object(m.W)(e)).then((function(){return t.$refs.sends.getList()})))},setLabel:function(){0===this.ids.length?this.$Message.warning("请选择要设置标签的用户"):(this.ids,this.labelActive.uid=0,this.labelShow=!0)},activeSelectData:function(e){this.selectLabelShow=!1,this.selectDataLabel=e||[]},activeData:function(e){var t=this,a=[];e.length&&(e.map((function(e){a.push(e.id)})),Object(m.B)({uids:this.ids.join(","),label_id:a}).then((function(e){t.labelShow=!1,t.selectedIds=new Set,t.getList(),t.$Message.success(e.msg)})))},changeMember:function(){this.userFrom.page=1,this.getList()},changeCountry:function(){"abroad"!==this.userFrom.country&&this.userFrom.country||(this.selectedData=[],this.userFrom.province="",this.userFrom.city="",this.address=[])},handleChange:function(e,t){this.selectedData=t.map((function(e){return e.label})),this.userFrom.province=this.selectedData[0],this.userFrom.city=this.selectedData[1]},onchangeTime:function(e){this.timeVal=e,this.userFrom.user_time=this.timeVal.join("-")},changeMenu:function(e,t,a){var s=this,r=[],n=(r.push(e.uid),{uids:r});switch(t){case"1":this.$refs.userDetails.modals=!0,this.$refs.userDetails.getDetails(e.uid);break;case"2":this.getOtherFrom(e.uid);break;case"3":this.giveLevelTime(e.uid);break;case"4":this.del(e,"清除 【 "+e.nickname+" 】的会员等级",a,"user");break;case"5":this.$modalForm(Object(m.W)(n)).then((function(){return s.getList()}));break;case"6":this.openLabel(e);break;case"7":this.editS(e);break;default:this.del(e,"解除【 "+e.nickname+" 】的上级推广人",a,"tuiguang")}},openLabel:function(e){this.labelShow=!0,this.labelActive.uid=e.uid},openSelectLabel:function(){this.selectLabelShow=!0},editS:function(e){this.promoterShow=!0,this.formInline.uid=e.uid},customer:function(){this.customerShow=!0},imageObject:function(e){this.customerShow=!1,this.formInline.spread_uid=e.uid,this.formInline.image=e.image},cancel:function(e){this.promoterShow=!1,this.$refs[e].resetFields()},giveLevel:function(e){var t=this;Object(m.k)(e).then(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1===a.data.status)return e.abrupt("return",t.$authLapse(a.data));e.next=2;break;case 2:t.FromData=a.data,t.$refs.edits.modals=!0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},giveLevelTime:function(e){var t=this;Object(m.l)(e).then(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1===a.data.status)return e.abrupt("return",t.$authLapse(a.data));e.next=2;break;case 2:t.FromData=a.data,t.$refs.edits.modals=!0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},del:function(e,t,a,s){var r=this;t={title:t,num:a,url:("user"===s?"user/del_level/":"agent/stair/delete_spread/").concat(e.uid),method:"user"===s?"DELETE":"PUT",ids:""};this.$modalSure(t).then((function(e){r.$Message.success(e.msg),r.getList()})).catch((function(e){r.$Message.error(e.msg)}))},submitModel:function(){this.getList()},getList:function(){var e,t=this;this.selectDataLabel.length&&(e=[],this.selectDataLabel.forEach((function(t){e.push(t.id)})),this.userFrom.label_id=e.join(",")),this.userFrom.user_type=this.userFrom.user_type||"",this.userFrom.status=this.userFrom.status||"",this.userFrom.sex=this.userFrom.sex||"",this.userFrom.is_promoter=this.userFrom.is_promoter||"",this.userFrom.country=this.userFrom.country||"",this.userFrom.pay_count="all"===this.pay_count?"":this.pay_count,this.userFrom.user_time_type="all"===this.user_time_type?"":this.user_time_type,this.userFrom.field_key="all"===this.field_key?"":this.field_key,this.userFrom.level="all"===this.level?"":this.level,this.userFrom.group_id="all"===this.group_id?"":this.group_id,this.loading=!0,Object(m.R)(this.userFrom).then(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.data,t.userLists=s.list,t.total=s.count,t.loading=!1,t.$nextTick((function(){t.setChecked()}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},exportList:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var a,s,r,n,i,o,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.selectDataLabel.length&&(a=[],e.selectDataLabel.forEach((function(e){a.push(e.id)})),e.userFrom.label_id=a.join(",")),e.userFrom.user_type=e.userFrom.user_type||"",e.userFrom.status=e.userFrom.status||"",e.userFrom.sex=e.userFrom.sex||"",e.userFrom.is_promoter=e.userFrom.is_promoter||"",e.userFrom.country=e.userFrom.country||"",e.userFrom.pay_count="all"===e.pay_count?"":e.pay_count,e.userFrom.user_time_type="all"===e.user_time_type?"":e.user_time_type,e.userFrom.field_key="all"===e.field_key?"":e.field_key,e.userFrom.level="all"===e.level?"":e.level,e.userFrom.group_id="all"===e.group_id?"":e.group_id,s=[],r=[],n=[],i="",(o=JSON.parse(JSON.stringify(e.userFrom))).page=1,l=0;case 15:if(l<o.page+1)return t.next=18,e.getExcelData(o);t.next=32;break;case 18:c=t.sent,i=i||c.filename,r.length||(r=c.fileKey),s.length||(s=c.header),c.export.length?(n=n.concat(c.export),o.page++,t.next=29):t.next=27;break;case 27:return e.$exportExcel(s,r,i,n),t.abrupt("return");case 29:l++,t.next=15;break;case 32:case"end":return t.stop()}}),t)})))()},getExcelData:function(e){return new Promise((function(t,a){Object(f.f)(e).then((function(e){t(e.data)}))}))},pageChange:function(e){this.selectionList=[],this.userFrom.page=e,this.getList()},userSearchs:function(){this.userFrom.page=1,this.getList()},reset:function(e){this.userFrom={user_type:this.userFrom.user_type,status:"",sex:"",is_promoter:"",country:"",pay_count:"",user_time_type:"",user_time:"",nickname:"",field_key:"",level:"",group_id:"",label_id:"",page:1,limit:20},this.field_key="",this.level="",this.group_id="",this.dataLabel=[],this.selectDataLabel=[],this.user_time_type="",this.pay_count="",this.timeVal=[],this.selectedIds=new Set,this.getList()},getUserFrom:function(e){var t=this;Object(m.i)(e).then(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.modals=!0,t.userData=a.data;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},getOtherFrom:function(e){var t=this;Object(m.g)(e).then(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1===a.data.status)return e.abrupt("return",t.$authLapse(a.data));e.next=2;break;case 2:t.FromData=a.data,t.$refs.edits.modals=!0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},onchangeIsShow:function(e){var t=this;e={id:e.uid,status:e.status};Object(m.o)(e).then(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$Message.success(a.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},onSend:function(){0===this.ids.length?this.$Message.warning("请选择要发送优惠券的用户"):(this.$refs.sends.modals=!0,this.$refs.sends.getList())},onSendPic:function(){0===this.ids.length?this.$Message.warning("请选择要发送图文消息的用户"):this.modal13=!0},edit:function(e){this.getUserFrom(e.uid)},submitFail:function(){},sortChanged:function(e){this.userFrom[e.key]=e.order,this.getList()},handleSelectAll:function(e){var t=this;0===e.length?this.$refs.table.data.forEach((function(e){t.selectedIds.has(e.uid)&&t.selectedIds.delete(e.uid)})):e.forEach((function(e){t.selectedIds.add(e.uid)})),this.$nextTick((function(){t.setChecked()}))},handleSelectRow:function(e,t){var a=this;this.selectedIds.add(t.uid),this.$nextTick((function(){a.setChecked()}))},handleCancelRow:function(e,t){var a=this;this.selectedIds.delete(t.uid),this.$nextTick((function(){a.setChecked()}))},setChecked:function(){this.ids=Object(s.a)(this.selectedIds);var e,t=this.$refs.table.objData;for(e in t)this.selectedIds.has(t[e].uid)&&(t[e]._isChecked=!0)}}},a("54cb"),b=Object(u.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",{staticClass:"ivu-mt listbox",attrs:{bordered:!1,"dis-hover":""}},[a("Tabs",{staticClass:"mb20",on:{"on-click":e.onClickTab}},e._l(e.headeNum,(function(e,t){return a("TabPane",{key:t,attrs:{label:e.name,name:e.type}})})),1),a("Form",{ref:"userFrom",attrs:{model:e.userFrom,"label-width":e.labelWidth,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:"18"}},[a("Col",{attrs:{span:"24"}},[a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"用户搜索：","label-for":"nickname"}},[a("Input",{attrs:{placeholder:"请输入用户","element-id":"nickname",clearable:""},model:{value:e.userFrom.nickname,callback:function(t){e.$set(e.userFrom,"nickname",t)},expression:"userFrom.nickname"}},[a("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.field_key,callback:function(t){e.field_key=t},expression:"field_key"}},[a("Option",{attrs:{value:"all"}},[e._v("全部")]),a("Option",{attrs:{value:"uid"}},[e._v("UID")]),a("Option",{attrs:{value:"phone"}},[e._v("手机号")]),a("Option",{attrs:{value:"nickname"}},[e._v("用户昵称")])],1)],1)],1)],1)],1)],1),e.collapse?[a("Col",{attrs:{span:"18"}},[a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"用户等级：","label-for":"level"}},[a("Select",{attrs:{placeholder:"请选择用户等级","element-id":"level",clearable:""},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}},[a("Option",{attrs:{value:"all"}},[e._v("全部")]),e._l(e.levelList,(function(t,s){return a("Option",{key:s,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],2)],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"用户分组：","label-for":"group_id"}},[a("Select",{attrs:{placeholder:"请选择用户分组","element-id":"group_id",clearable:""},model:{value:e.group_id,callback:function(t){e.group_id=t},expression:"group_id"}},[a("Option",{attrs:{value:"all"}},[e._v("全部")]),e._l(e.groupList,(function(t,s){return a("Option",{key:s,attrs:{value:t.id}},[e._v(e._s(t.group_name))])}))],2)],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"用户标签：","label-for":"label_id"}},[a("div",{staticClass:"labelInput acea-row row-between-wrapper",on:{click:e.openSelectLabel}},[a("div",{staticStyle:{width:"90%"}},[e.selectDataLabel.length?a("div",e._l(e.selectDataLabel,(function(t,s){return a("Tag",{key:s,attrs:{closable:!1},on:{"on-close":function(a){return e.closeLabel(t)}}},[e._v(e._s(t.label_name))])})),1):a("span",{staticClass:"span"},[e._v("选择用户关联标签")])]),a("div",{staticClass:"ivu-icon ivu-icon-ios-arrow-down"})])])],1)],1),a("Col",{attrs:{span:"18"}},[a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"付费会员：","label-for":"isMember"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:e.userFrom.isMember,callback:function(t){e.$set(e.userFrom,"isMember",t)},expression:"userFrom.isMember"}},[a("Radio",{attrs:{label:""}},[a("span",[e._v("全部")])]),a("Radio",{attrs:{label:"1"}},[a("span",[e._v("是")])]),a("Radio",{attrs:{label:"0"}},[a("span",[e._v("否")])])],1)],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"国家：","label-for":"country"}},[a("Select",{attrs:{placeholder:"请选择国家","element-id":"country",clearable:""},on:{"on-change":e.changeCountry},model:{value:e.userFrom.country,callback:function(t){e.$set(e.userFrom,"country",t)},expression:"userFrom.country"}},[a("Option",{attrs:{value:"domestic"}},[e._v("中国")]),a("Option",{attrs:{value:"abroad"}},[e._v("外国")])],1)],1)],1),"domestic"===e.userFrom.country?a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"省份："}},[a("Cascader",{attrs:{data:e.addresData,value:e.address},on:{"on-change":e.handleChange},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1)],1):e._e()],1),a("Col",{attrs:{span:"18"}},[a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"性别：","label-for":"sex"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:e.userFrom.sex,callback:function(t){e.$set(e.userFrom,"sex",t)},expression:"userFrom.sex"}},[a("Radio",{attrs:{label:""}},[a("span",[e._v("全部")])]),a("Radio",{attrs:{label:"1"}},[a("span",[e._v("男")])]),a("Radio",{attrs:{label:"2"}},[a("span",[e._v("女")])]),a("Radio",{attrs:{label:"0"}},[a("span",[e._v("保密")])])],1)],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"身份：","label-for":"is_promoter"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:e.userFrom.is_promoter,callback:function(t){e.$set(e.userFrom,"is_promoter",t)},expression:"userFrom.is_promoter"}},[a("Radio",{attrs:{label:""}},[a("span",[e._v("全部")])]),a("Radio",{attrs:{label:"1"}},[a("span",[e._v("推广员")])]),a("Radio",{attrs:{label:"0"}},[a("span",[e._v("普通用户")])])],1)],1)],1)],1),a("Col",{attrs:{span:"18"}},[a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"访问情况：","label-for":"user_time_type"}},[a("Select",{attrs:{placeholder:"请选择访问情况","element-id":"user_time_type",clearable:""},model:{value:e.user_time_type,callback:function(t){e.user_time_type=t},expression:"user_time_type"}},[a("Option",{attrs:{value:""}},[e._v("全部")]),a("Option",{attrs:{value:"visitno"}},[e._v("时间段未访问")]),a("Option",{attrs:{value:"visit"}},[e._v("时间段访问过")]),a("Option",{attrs:{value:"add_time"}},[e._v("首次访问")])],1)],1)],1),e.user_time_type?a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"访问时间：","label-for":"user_time"}},[a("DatePicker",{staticClass:"mr20",staticStyle:{width:"300px"},attrs:{editable:!1,value:e.timeVal,format:"yyyy/MM/dd",type:"datetimerange",placement:"bottom-start",placeholder:"请选择访问时间",options:e.options},on:{"on-change":e.onchangeTime}})],1)],1):e._e()],1),a("Col",{attrs:{span:"18"}},[a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"下单次数：","label-for":"pay_count"}},[a("Select",{attrs:{placeholder:"请选择下单次数","element-id":"pay_count",clearable:""},model:{value:e.pay_count,callback:function(t){e.pay_count=t},expression:"pay_count"}},[a("Option",{attrs:{value:"all"}},[e._v("全部")]),a("Option",{attrs:{value:"-1"}},[e._v("0次")]),a("Option",{attrs:{value:"0"}},[e._v("1次以上")]),a("Option",{attrs:{value:"1"}},[e._v("2次以上")]),a("Option",{attrs:{value:"2"}},[e._v("3次以上")]),a("Option",{attrs:{value:"3"}},[e._v("4次以上")]),a("Option",{attrs:{value:"4"}},[e._v("5次以上")])],1)],1)],1)],1)]:e._e(),a("Col",{staticClass:"ivu-text-right userFrom",attrs:{span:"6"}},[a("FormItem",[a("Button",{staticClass:"mr15",attrs:{type:"primary",icon:"ios-search",label:"default"},on:{click:e.userSearchs}},[e._v("搜索")]),a("Button",{staticClass:"ResetSearch",on:{click:function(t){return e.reset("userFrom")}}},[e._v("重置")]),a("a",{staticClass:"ivu-ml-8 font14 ml10",on:{click:function(t){e.collapse=!e.collapse}}},[e.collapse?[e._v(" 收起 "),a("Icon",{attrs:{type:"ios-arrow-up"}})]:[e._v(" 展开 "),a("Icon",{attrs:{type:"ios-arrow-down"}})]],2)],1)],1)],2)],1),a("Divider",{attrs:{dashed:""}}),a("Row",{staticClass:"mt20",attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"24"}},[a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-save"],expression:"['admin-user-save']"}],staticClass:"mr20",attrs:{type:"primary"},on:{click:function(t){return e.edit({uid:0})}}},[e._v("添加用户")]),a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-coupon"],expression:"['admin-user-coupon']"}],staticClass:"mr20",on:{click:e.onSend}},[e._v("发送优惠券")]),"wechat"===e.userFrom.user_type?a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-wechat-news"],expression:"['admin-wechat-news']"}],staticClass:"greens mr20",attrs:{size:"default"},on:{click:e.onSendPic}},[a("Icon",{attrs:{type:"md-list"}}),e._v("\n          发送图文消息\n        ")],1):e._e(),a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-group_set"],expression:"['admin-user-group_set']"}],staticClass:"mr20",on:{click:e.setGroup}},[e._v("批量设置分组")]),a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-set_label"],expression:"['admin-user-set_label']"}],staticClass:"mr20",on:{click:e.setLabel}},[e._v("批量设置标签")]),a("Button",{staticClass:"mr20",attrs:{icon:"ios-share-outline"},on:{click:e.exportList}},[e._v("导出")])],1),e.selectionList.length?a("Col",{staticClass:"userAlert",attrs:{span:"24"}},[a("Alert",{attrs:{"show-icon":""}},[e._v("\n          已选择"),a("i",{staticClass:"userI"},[e._v(" "+e._s(e.selectionList.length)+" ")]),e._v("项")])],1):e._e()],1),a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:e.columns,data:e.userLists,"highlight-row":"",loading:e.loading,"no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},on:{"on-sort-change":e.sortChanged,"on-select":e.handleSelectRow,"on-select-cancel":e.handleCancelRow,"on-select-all":e.handleSelectAll,"on-select-all-cancel":e.handleSelectAll},scopedSlots:e._u([{key:"avatars",fn:function(e){var t=e.row;return e.index,[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatar,expression:"row.avatar"}]})])]}},{key:"nickname",fn:function(t){var s=t.row;return t.index,[a("div",{staticClass:"acea-row"},[a("Icon",{directives:[{name:"show",rawName:"v-show",value:"男"===s.sex,expression:"row.sex === '男'"}],staticClass:"mr5",attrs:{type:"md-male",color:"#2db7f5",size:"15"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:"女"===s.sex,expression:"row.sex === '女'"}],staticClass:"mr5",attrs:{type:"md-female",color:"#ed4014",size:"15"}}),a("div",{domProps:{textContent:e._s(s.nickname)}})],1),1==s.is_del?a("div",{staticStyle:{color:"red"}},[e._v("用户已注销")]):e._e()]}},{key:"isMember",fn:function(t){var s=t.row;return t.index,[a("div",[e._v(e._s(s.isMember?"是":"否"))])]}},{key:"action",fn:function(t){var s=t.row,r=t.index;return[1!=s.is_del?[a("a",{on:{click:function(t){return e.edit(s)}}},[e._v("编辑")]),a("Divider",{attrs:{type:"vertical"}}),a("Dropdown",{attrs:{transfer:!0},on:{"on-click":function(t){return e.changeMenu(s,t,r)}}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("\n              更多\n              "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"1"}},[e._v("账户详情")]),a("DropdownItem",{attrs:{name:"2"}},[e._v("积分余额")]),a("DropdownItem",{attrs:{name:"3"}},[e._v("赠送会员")]),a("DropdownItem",{attrs:{name:"5"}},[e._v("设置分组")]),a("DropdownItem",{attrs:{name:"6"}},[e._v("设置标签")]),a("DropdownItem",{attrs:{name:"7"}},[e._v("修改上级推广人")]),s.spread_uid?a("DropdownItem",{attrs:{name:"8"}},[e._v("清除上级推广人")]):e._e()],1)],1)]:[1==s.is_del?a("div",{staticStyle:{color:"red"}},[e._v("已注销")]):e._e()]]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.total,current:e.userFrom.page,"show-elevator":"","show-total":"","page-size":e.userFrom.limit},on:{"on-change":e.pageChange}})],1)],1),a("edit-from",{ref:"edits",attrs:{FromData:e.FromData},on:{submitFail:e.submitFail}}),a("send-from",{ref:"sends",attrs:{userIds:e.ids.toString()}}),a("user-details",{ref:"userDetails"}),a("Modal",{staticClass:"modelBox",attrs:{scrollable:"",title:"发送消息",width:"1200",height:"800","footer-hide":""},model:{value:e.modal13,callback:function(t){e.modal13=t},expression:"modal13"}},[e.modal13?a("news-category",{attrs:{isShowSend:e.isShowSend,userIds:e.ids.toString(),scrollerHeight:e.scrollerHeight,contentTop:e.contentTop,contentWidth:e.contentWidth,maxCols:e.maxCols}}):e._e()],1),a("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"修改推广人",closable:!1},model:{value:e.promoterShow,callback:function(t){e.promoterShow=t},expression:"promoterShow"}},[a("Form",{ref:"formInline",attrs:{model:e.formInline,"label-width":100},nativeOn:{submit:function(e){e.preventDefault()}}},[e.formInline?a("FormItem",{attrs:{label:"选择推广人：",prop:"image"}},[a("div",{staticClass:"picBox",on:{click:e.customer}},[e.formInline.image?a("div",{staticClass:"pictrue"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.formInline.image,expression:"formInline.image"}]})]):a("div",{staticClass:"upLoad acea-row row-center-wrapper"},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1)])]):e._e()],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.putSend("formInline")}}},[e._v("提交")]),a("Button",{on:{click:function(t){return e.cancel("formInline")}}},[e._v("取消")])],1)],1),a("Modal",{attrs:{scrollable:"",title:"请选择商城用户",closable:!1,width:"50%"},model:{value:e.customerShow,callback:function(t){e.customerShow=t},expression:"customerShow"}},[e.customerShow?a("customerInfo",{on:{imageObject:e.imageObject}}):e._e()],1),a("Modal",{attrs:{scrollable:"",title:"请选择用户标签",closable:!1,width:"500","footer-hide":!0},model:{value:e.labelShow,callback:function(t){e.labelShow=t},expression:"labelShow"}},[e.labelShow?a("userLabel",{attrs:{uid:e.labelActive.uid,only_get:!e.labelActive.uid},on:{close:e.labelClose,activeData:e.activeData,onceGetList:e.onceGetList}}):e._e()],1),a("Drawer",{attrs:{closable:!1,width:"700",title:"用户信息填写"},model:{value:e.modals,callback:function(t){e.modals=t},expression:"modals"}},[e.modals?a("userEdit",{ref:"userEdit",attrs:{userData:e.userData}}):e._e(),a("div",{staticClass:"demo-drawer-footer"},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(t){e.modals=!1}}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:e.setUser}},[e._v("提交")])],1)],1),a("Modal",{attrs:{scrollable:"",title:"请选择用户标签",closable:!1,width:"500","footer-hide":!0,"mask-closable":!1},model:{value:e.selectLabelShow,callback:function(t){e.selectLabelShow=t},expression:"selectLabelShow"}},[e.selectLabelShow?a("userLabel",{ref:"userLabel",attrs:{uid:0,only_get:!0},on:{activeData:e.activeSelectData,close:e.labelClose}}):e._e()],1)],1)}),[],!1,null,"645a730d",null);t.default=b.exports},"17b6":function(e,t,a){},"232f":function(e,t,a){"use strict";a("a9e3"),a("d81d"),a("a434");var s=a("c24f"),r={name:"userLabel",props:{uid:{type:String|Number,default:""},only_get:{default:!1},selectDataLabel:{type:Array,default:function(){}}},data:function(){return{labelList:[],activeIds:[],unLaberids:[]}},watch:{uid:{handler:function(e,t){e!=t&&this.getList()},deep:!0}},mounted:function(){this.getList()},methods:{getList:function(){var e=this;Object(s.j)(this.uid).then((function(t){e.selectDataLabel&&e.selectDataLabel.length&&e.selectDataLabel.map((function(e){t.data.map((function(t){t.label.map((function(t){t.id===e.id&&(t.disabled=!0)}))}))})),t.data.map((function(t){t.label.map((function(t){t.disabled&&e.activeIds.push(t.id)}))})),e.labelList=t.data}))},selectLabel:function(e){var t;e.disabled?(t=this.activeIds.indexOf(e.id),this.activeIds.splice(t,1),e.disabled=!1):(this.activeIds.push(e.id),e.disabled=!0)},subBtn:function(){var e=this,t=[];this.only_get?(this.labelList.map((function(e){e.label.map((function(e){1==e.disabled&&t.push({id:e.id,label_name:e.label_name})}))})),this.$emit("activeData",t)):(this.labelList.map((function(e){e.label.map((function(e){0==e.disabled&&t.push(e.id)}))})),this.unLaberids=t,Object(s.A)(this.uid,{label_ids:this.activeIds,un_label_ids:this.unLaberids}).then((function(t){e.$emit("onceGetList"),e.activeIds=[],e.unLaberids=[],e.$Message.success(t.msg),e.$emit("close")})).catch((function(t){e.$Message.error(t.msg)})))},cancel:function(){this.activeIds=[],this.unLaberids=[],this.$emit("close")}}};a("80a9"),a=a("2877"),a=Object(a.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label-wrapper"},[e.labelList[0]?e._l(e.labelList,(function(t,s){return a("div",{key:s,staticClass:"label-box"},[a("div",{staticClass:"title"},[e._v(e._s(t.name))]),a("div",{staticClass:"list"},e._l(t.label,(function(t,s){return a("div",{key:s,staticClass:"label-item",class:{on:t.disabled},on:{click:function(a){return e.selectLabel(t)}}},[e._v("\n        "+e._s(t.label_name)+"\n      ")])})),0)])})):a("div",{staticClass:"nonefont"},[e._v("暂无标签")]),a("div",{staticClass:"footer"},[a("Button",{staticClass:"btns",attrs:{type:"primary"},on:{click:e.subBtn}},[e._v("确定")]),a("Button",{staticClass:"btns",attrs:{type:"primary",ghost:""},on:{click:e.cancel}},[e._v("取消")])],1)],2)}),[],!1,null,"d3286774",null);t.a=a.exports},2739:function(e,t,a){"use strict";var s=a("2d16");a.n(s).a},"2c3e":function(e,t,a){var s=a("da84"),r=a("83ab"),n=a("9f7f").MISSED_STICKY,i=a("c6b6"),o=a("edd0"),l=a("69f3").get,c=RegExp.prototype,u=s.TypeError;r&&n&&o(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===i(this))return!!l(this).sticky;throw u("Incompatible receiver, RegExp required")}}})},"2d16":function(e,t,a){},"31b4":function(e,t,a){"use strict";var s=a("f3f3"),r=a("9860"),n=(r=a.n(r),a("6b6c")),i=a("2f62");r={name:"edit",components:{formCreate:r.a.$form()},computed:Object(s.a)({},Object(i.e)("userLevel",["taskId","levelId"])),props:{FromData:{type:Object,default:null},update:{type:Boolean,default:!0}},data:function(){return{modals:!1,type:0,config:{global:{upload:{props:{onSuccess:function(e,t){200===e.status?t.url=e.data.src:this.Message.error(e.msg)}}}}}}},methods:{couponsType:function(){this.$parent.addType(this.type)},onSubmit:function(e){var t=this;Object(n.a)({url:this.FromData.action,method:this.FromData.method,data:e}).then((function(e){t.update&&t.$parent.getList(),t.$Message.success(e.msg),t.modals=!1,setTimeout((function(){t.$emit("submitFail")}),1e3)})).catch((function(e){t.$Message.error(e.msg)}))},cancel:function(){this.type=0}}},a("2739"),s=a("2877"),i=Object(s.a)(r,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return e.FromData?t("div",[t("Modal",{attrs:{scrollable:"","footer-hide":"",closable:"",title:e.FromData.title,"z-index":1,width:"700"},on:{"on-cancel":e.cancel},model:{value:e.modals,callback:function(t){e.modals=t},expression:"modals"}},[["/marketing/coupon/save.html"===e.FromData.action?t("div",{staticClass:"radio acea-row row-middle"},[t("div",{staticClass:"name ivu-form-item-content"},[e._v("优惠券类型")]),t("Radio-group",{on:{"on-change":e.couponsType},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[t("Radio",{attrs:{label:0}},[e._v("通用券")]),t("Radio",{attrs:{label:1}},[e._v("品类券")]),t("Radio",{attrs:{label:2}},[e._v("商品券")])],1)],1):e._e()],t("form-create",{ref:"fc",staticClass:"formBox",attrs:{option:e.config,rule:Array.from(e.FromData.rules),handleIcon:"false"},on:{submit:e.onSubmit}})],2)],1):e._e()}),[],!1,null,"f3a534e8",null);t.a=i.exports},"3f2a":function(e,t,a){"use strict";a.d(t,"f",(function(){return r})),a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"g",(function(){return u}));var s=a("6b6c");function r(e){return Object(s.a)({url:"/export/user_list",method:"get",params:e})}function n(e){return Object(s.a)({url:"/export/order_list",method:"get",params:e})}function i(e){return Object(s.a)({url:"/export/product_list",method:"get",params:e})}function o(e){return Object(s.a)({url:"/export/bargain_list",method:"get",params:e})}function l(e){return Object(s.a)({url:"/export/combination_list",method:"get",params:e})}function c(e){return Object(s.a)({url:"/export/seckill_list",method:"get",params:e})}function u(e){return Object(s.a)({url:"/export/member_card/".concat(e),method:"get"})}},"4a87":function(e,t,a){},"4adc":function(e,t,a){},"4d63":function(e,t,a){var s=a("83ab"),r=a("da84"),n=a("e330"),i=a("94ca"),o=a("7156"),l=a("9112"),c=a("241c").f,u=a("3a9b"),d=a("44e7"),m=a("577e"),p=a("90d8"),h=a("9f7f"),f=a("aeb0"),b=a("cb2d"),v=a("d039"),g=a("1a2d"),_=a("69f3").enforce,y=a("2626"),w=a("b622"),k=a("fce3"),x=a("107c"),I=w("match"),C=r.RegExp,F=C.prototype,D=r.SyntaxError,L=n(F.exec),S=n("".charAt),O=n("".replace),$=n("".indexOf),j=n("".slice),M=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,R=/a/g,T=/a/g,W=(a=new C(R)!==R,h.MISSED_STICKY),E=h.UNSUPPORTED_Y;w=s&&(!a||W||k||x||v((function(){return T[I]=!1,C(R)!=R||C(T)==T||"/a/i"!=C(R,"i")})));if(i("RegExp",w)){function A(e,t){var a,s,r=u(F,this),n=d(e),i=void 0===t,c=[],h=e;if(!r&&n&&i&&e.constructor===A)return e;if((n||u(F,e))&&(e=e.source,i&&(t=p(h))),e=void 0===e?"":m(e),t=void 0===t?"":m(t),h=e,n=t=k&&"dotAll"in R&&(a=!!t&&-1<$(t,"s"))?O(t,/s/g,""):t,W&&"sticky"in R&&(s=!!t&&-1<$(t,"y"))&&E&&(t=O(t,/y/g,"")),x&&(e=(i=function(e){for(var t,a=e.length,s=0,r="",n=[],i={},o=!1,l=!1,c=0,u="";s<=a;s++){if("\\"===(t=S(e,s)))t+=S(e,++s);else if("]"===t)o=!1;else if(!o)switch(!0){case"["===t:o=!0;break;case"("===t:L(M,j(e,s+1))&&(s+=2,l=!0),r+=t,c++;continue;case">"===t&&l:if(""===u||g(i,u))throw new D("Invalid capture group name");i[u]=!0,l=!(n[n.length]=[u,c]),u="";continue}l?u+=t:r+=t}return[r,n]}(e))[0],c=i[1]),i=o(C(e,t),r?this:F,A),(a||s||c.length)&&(t=_(i),a&&(t.dotAll=!0,t.raw=A(function(e){for(var t,a=e.length,s=0,r="",n=!1;s<=a;s++)"\\"===(t=S(e,s))?r+=t+S(e,++s):n||"."!==t?("["===t?n=!0:"]"===t&&(n=!1),r+=t):r+="[\\s\\S]";return r}(e),n)),s&&(t.sticky=!0),c.length&&(t.groups=c)),e!==h)try{l(i,"source",""===h?"(?:)":h)}catch(e){}return i}for(var B=c(C),N=0;B.length>N;)f(A,C,B[N++]);(F.constructor=A).prototype=F,b(r,"RegExp",A,{constructor:!0})}y("RegExp")},"54cb":function(e,t,a){"use strict";var s=a("4a87");a.n(s).a},"581d":function(e,t,a){},"61f7":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return c}));var s=a("fc11"),r=a("f3f3");function n(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a,s,r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(a in r)new RegExp("(".concat(a,")")).test(t)&&(s=r[a]+"",t=t.replace(RegExp.$1,1===RegExp.$1.length?s:("00"+s).substr(s.length)));return t}a("ac1f"),a("00b4"),a("5319"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("498a"),a("d3b7"),a("b64b"),a("99af");var i={min:"%s最小长度为:min",max:"%s最大长度为:max",length:"%s长度必须为:length",range:"%s长度为:range",pattern:"$s格式错误"};function o(e,t){e.message=function(e){return t.replace("%s",e||"")}}function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)({required:!0,message:e,type:"string"},t)}function c(e){return u.pattern(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,e)}o(l,"请输入%s"),o(c,"%s格式不正确");var u=Object.keys(i).reduce((function(e,t){return e[t]=function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i="range"===t?{min:e[0],max:e[1]}:Object(s.a)({},t,e);return Object(r.a)(Object(r.a)({message:a.replace(":".concat(t),"range"===t?"".concat(e[0],"-").concat(e[1]):e),type:"string"},i),n)},o(e[t],i[t]),e}),{})},"6a36":function(e,t,a){"use strict";var s=a("4adc");a.n(s).a},"6ebe":function(e,t,a){"use strict";var s=a("581d");a.n(s).a},"80a9":function(e,t,a){"use strict";var s=a("a8b5");a.n(s).a},8651:function(e,t,a){},"9eaf":function(e,t,a){"use strict";var s=a("17b6");a.n(s).a},a716:function(e,t,a){"use strict";var s=a("c964"),r=(a("96cf"),a("c24f")),n={name:"userDetails",data:function(){return{theme2:"light",list:[{val:"order",label:"消费记录"},{val:"integral",label:"积分明细"},{val:"sign",label:"签到记录"},{val:"coupon",label:"持有优惠券"},{val:"balance_change",label:"余额变动"},{val:"spread",label:"好友关系"}],modals:!1,spinShow:!1,detailsData:[],userId:0,loading:!1,userFrom:{type:"order",page:1,limit:20},total:0,columns:[],userLists:[],psInfo:{},activeName:"order"}},created:function(){},methods:{getDetails:function(e){var t=this;this.activeName="order",this.userId=e,this.spinShow=!0,Object(r.f)(e).then(function(){var e=Object(s.a)(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===a.status?(s=a.data,t.detailsData=s.headerList,t.psInfo=s.ps_info,t.changeType("order"),t.spinShow=!1):(t.spinShow=!1,t.$Message.error(a.msg));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))},pageChange:function(e){this.userFrom.page=e,this.changeType(this.userFrom.type)},changeType:function(e){var t=this;this.loading=!0,this.userFrom.type=e,this.activeName=e,""===this.userFrom.type&&(this.userFrom.type="order"),e={id:this.userId,datas:this.userFrom};Object(r.n)(e).then(function(){var e=Object(s.a)(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200!==a.status?e.next=21:(s=a.data,t.userLists=s.list,t.total=s.count,e.t0=t.userFrom.type,e.next="order"===e.t0?7:"integral"===e.t0?9:"sign"===e.t0?11:"coupon"===e.t0?13:"balance_change"===e.t0?15:17);break;case 7:return t.columns=[{title:"订单ID",key:"order_id",minWidth:160},{title:"收货人",key:"real_name",minWidth:100},{title:"商品数量",key:"total_num",minWidth:90},{title:"实付金额",key:"pay_price",minWidth:120},{title:"交易完成时间",key:"pay_time",minWidth:120}],e.abrupt("break",18);case 9:return t.columns=[{title:"来源/用途",key:"title",minWidth:120},{title:"积分变化",key:"number",minWidth:120},{title:"变化前积分",key:"balance",minWidth:120},{title:"日期",key:"add_time",minWidth:120},{title:"备注",key:"mark",minWidth:120}],e.abrupt("break",18);case 11:return t.columns=[{title:"动作",key:"title",minWidth:120},{title:"获得积分",key:"number",minWidth:120},{title:"签到时间",key:"add_time",minWidth:120},{title:"备注",key:"mark",minWidth:120}],e.abrupt("break",18);case 13:return t.columns=[{title:"优惠券名称",key:"coupon_title",minWidth:120},{title:"面值",key:"coupon_price",minWidth:120},{title:"有效期(天)",key:"coupon_time",minWidth:120},{title:"兑换时间",key:"_add_time",minWidth:120}],e.abrupt("break",18);case 15:return t.columns=[{title:"动作",key:"title",minWidth:120},{title:"余额变动",slot:"number",minWidth:120},{title:"当前余额",key:"balance",minWidth:120},{title:"创建时间",key:"add_time",minWidth:120},{title:"备注",key:"mark",minWidth:120}],e.abrupt("break",18);case 17:t.columns=[{title:"ID",key:"uid",minWidth:120},{title:"昵称",key:"nickname",minWidth:120},{title:"等级",key:"type",minWidth:120},{title:"加入时间",key:"add_time",minWidth:120}];case 18:t.loading=!1,e.next=23;break;case 21:t.loading=!1,t.$Message.error(a.msg);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))}}};a("6a36"),a("f31e"),a=a("2877"),a=Object(a.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("Drawer",{attrs:{title:"用户详情",closable:!1,width:"900",scrollable:""},model:{value:e.modals,callback:function(t){e.modals=t},expression:"modals"}},[e.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("div",{staticClass:"acea-row"},[a("div",{staticClass:"avatar mr15"},[a("img",{attrs:{src:e.psInfo.avatar}})]),a("div",{staticClass:"dashboard-workplace-header-tip"},[a("p",{staticClass:"dashboard-workplace-header-tip-title",domProps:{textContent:e._s(e.psInfo.nickname||"-")}}),a("div",{staticClass:"dashboard-workplace-header-tip-desc"},e._l(e.detailsData,(function(t,s){return a("span",{key:s,staticClass:"dashboard-workplace-header-tip-desc-sp"},[e._v(e._s(t.title+"："+t.value))])})),0)])]),a("Row",{staticClass:"mt25",attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"24"}},[a("Tabs",{staticClass:"mb20",attrs:{value:e.activeName},on:{"on-click":e.changeType}},e._l(e.list,(function(e,t){return a("TabPane",{key:t,attrs:{name:e.val,label:e.label}})})),1)],1),a("Col",{attrs:{span:"24"}},[a("Table",{ref:"table",attrs:{columns:e.columns,data:e.userLists,"max-height":"400",loading:e.loading,"no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:e._u([{key:"number",fn:function(t){return t=t.row,[a("div",{class:t.pm?"plusColor":"reduceColor"},[e._v("\n              "+e._s(t.pm?"+"+t.number:"-"+t.number)+"\n            ")])]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.total,current:e.userFrom.page,"show-elevator":"","show-total":"","page-size":e.userFrom.limit},on:{"on-change":e.pageChange}})],1)],1)],1)],1)],1)}),[],!1,null,"ae6014ec",null);t.a=a.exports},a8b5:function(e,t,a){},a8e0:function(e,t,a){"use strict";var s=a("c964"),r=(a("96cf"),a("c24f")),n={name:"send",props:{userIds:{type:String,default:""}},data:function(){return{modals:!1,loading:!1,couponList:[],columns:[{title:"优惠券名称",key:"title",align:"center",minWidth:100},{title:"优惠券面值",key:"coupon_price",align:"center",minWidth:80},{title:"优惠券最低消费",key:"use_min_price",align:"center",minWidth:150},{title:"优惠券有效期限",slot:"coupon_time",align:"center",minWidth:120},{title:"操作",slot:"action",align:"center",width:120}],page:{page:1,limit:15,coupon_title:"",receive_type:1},total:0}},methods:{getList:function(e){var t=this;this.loading=!0,Object(r.c)(this.page).then(function(){var e=Object(s.a)(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===a.status?(s=a.data,t.couponList=s.list,t.total=s.count,t.loading=!1):(t.loading=!1,t.$Message.error(a.msg));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},userSearchs:function(){this.getList()},pageChange:function(e){this.page.page=e,this.getList()},sendGrant:function(e,t,a){var s=this;t={title:t,num:a,url:"marketing/coupon/user/grant",method:"post",ids:{id:e.id,uid:this.userIds}};this.$modalSure(t).then((function(e){s.$Message.success(e.msg)})).catch((function(e){s.$Message.error(e.msg)}))}}};a("9eaf"),a=a("2877"),a=Object(a.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Modal",{attrs:{"z-index":100,scrollable:"","footer-hide":"",closable:"",title:"发送优惠券","mask-closable":!1,width:"900"},model:{value:e.modals,callback:function(t){e.modals=t},expression:"modals"}},[a("div",{staticClass:"acea-row"},[a("span",{staticClass:"sp"},[e._v("优惠券名称：")]),a("Input",{staticStyle:{width:"60%"},attrs:{search:"","enter-button":"",placeholder:"请输入优惠券名称"},on:{"on-search":e.userSearchs},model:{value:e.page.coupon_title,callback:function(t){e.$set(e.page,"coupon_title",t)},expression:"page.coupon_title"}})],1),a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:e.columns,data:e.couponList,loading:e.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:e._u([{key:"coupon_time",fn:function(t){var s=t.row;return t.index,[s.coupon_time?a("div",[e._v(e._s(s.coupon_time))]):a("div",[e._v(e._s(s.use_time))])]}},{key:"action",fn:function(t){var s=t.row,r=t.index;return[a("a",{on:{click:function(t){return e.sendGrant(s,"发送优惠券",r)}}},[e._v("发送")])]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.total,"show-elevator":"","show-total":"","page-size":e.page.limit},on:{"on-change":e.pageChange}})],1)],1)],1)}),[],!1,null,"322792d8",null);t.a=a.exports},bbbc:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return n})),a.d(t,"n",(function(){return i})),a.d(t,"m",(function(){return o})),a.d(t,"h",(function(){return l})),a.d(t,"j",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"o",(function(){return d})),a.d(t,"l",(function(){return m})),a.d(t,"f",(function(){return p})),a.d(t,"a",(function(){return h})),a.d(t,"e",(function(){return f})),a.d(t,"k",(function(){return b})),a.d(t,"d",(function(){return v})),a.d(t,"g",(function(){return g})),a("99af");var s=a("6b6c");function r(e){return Object(s.a)({url:"agent/index",method:"get",params:e})}function n(e){return Object(s.a)({url:"agent/spread",method:"PUT",data:e})}function i(e){return Object(s.a)({url:"agent/statistics",method:"get",params:e})}function o(e,t){return Object(s.a)({url:e,method:"get",params:t})}function l(e){return Object(s.a)({url:"agent/look_code",method:"get",params:e})}function c(e){return Object(s.a)({url:"agent/look_xcx_code",method:"get",params:e})}function u(e){return Object(s.a)({url:"agent/look_h5_code",method:"get",params:e})}function d(e){return Object(s.a)({url:"export/userAgent",method:"get",params:e})}function m(e){return Object(s.a)({url:"agent/division/list",method:"get",params:e})}function p(e){return Object(s.a)({url:"agent/division/agent_apply/list",method:"get",params:e})}function h(e){return Object(s.a)({url:"agent/division/agent/create/".concat(e),method:"get"})}function f(e,t){return Object(s.a)({url:"agent/division/examine_apply/".concat(e,"/").concat(t),method:"get"})}function b(e){return Object(s.a)({url:"agent/division/create/".concat(e),method:"get"})}function v(e){return Object(s.a)({url:"agent/division/down_list",method:"get",params:e})}function g(e){return Object(s.a)({url:"agent/division/set_status/".concat(e.status,"/").concat(e.id),method:"put"})}},c607:function(e,t,a){var s=a("da84"),r=a("83ab"),n=a("fce3"),i=a("c6b6"),o=a("edd0"),l=a("69f3").get,c=RegExp.prototype,u=s.TypeError;r&&n&&o(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===i(this))return!!l(this).dotAll;throw u("Incompatible receiver, RegExp required")}}})},c749:function(e,t,a){},e258:function(e,t,a){"use strict";var s=a("8651");a.n(s).a},edd0:function(e,t,a){var s=a("13d2"),r=a("9bf2");e.exports=function(e,t,a){return a.get&&s(a.get,t,{getter:!0}),a.set&&s(a.set,t,{setter:!0}),r.f(e,t,a)}},f31e:function(e,t,a){"use strict";var s=a("c749");a.n(s).a}}]);